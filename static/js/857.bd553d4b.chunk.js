/*! For license information please see 857.bd553d4b.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkeramorph=self.webpackChunkeramorph||[]).push([[857],{6857:function(e,n,r){r.r(n),r.d(n,{default:function(){return I}});var t=r(4165),a=r(5861),s=r(4942),i=r(1413),o=r(9439),c=r(2791),l=r(5151),u=r(1243),d="/api/",p=u.Z.create({withCredentials:!0}),h={get:function(e,n){return f(e,"GET",n)},post:function(e,n){return f(e,"POST",n)},put:function(e,n){return f(e,"PUT",n)},delete:function(e,n){return f(e,"DELETE",n)}};function f(e){return m.apply(this,arguments)}function m(){return m=(0,a.Z)((0,t.Z)().mark((function e(n){var r,a,s,i=arguments;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:"GET",a=i.length>2&&void 0!==i[2]?i[2]:null,e.prev=2,e.next=5,p({url:"".concat(d).concat(n),method:r,data:a,params:"GET"===r?a:null});case 5:return s=e.sent,e.abrupt("return",s.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.log("Had Issues ".concat(r,"ing to the backend, endpoint: ").concat(n,", with data:"),a),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&sessionStorage.clear(),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])}))),m.apply(this,arguments)}var g={signup:function(e){return b.apply(this,arguments)}},v="auth/";function b(){return(b=(0,a.Z)((0,t.Z)().mark((function e(n){var r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=w(n),e.next=4,h.post(v+"signup",r);case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),e.t0;case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function w(e){var n=e.username,r=e.password,t=e.firstName,a=e.lastName;return{Username:n,Password:r,UserAttributes:[{Name:"email",Value:e.emailAddress},{Name:"given_name",Value:t},{Name:"family_name",Value:a}]}}var Z=r(5910);function y(e){return function(){var n=(0,a.Z)((0,t.Z)().mark((function n(r,a){var s,i;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,g.signup(e);case 3:s=n.sent,i={type:Z.Q,user:s},r(i),n.next=12;break;case 8:throw n.prev=8,n.t0=n.catch(0),console.error("error:",n.t0),n.t0;case 12:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e,r){return n.apply(this,arguments)}}()}var x=r(7689);var k=r(7961),N=r(585),F=r(4928),j=r(1088),C=r(184);function P(e){var n=e.inputField,r=e.credentials,t=e.errors,a=e.isFloating,s=e.handleChange,i=e.handleFocus,o=e.handleBlur,c=e.togglePassVisibility,l=n.type,u=n.placeholder,d=n.name,p=n.hasBeenChecked,h=n.isVisible,f=p?t[d]?"error":"success":"";return l="password"===l&&h?"text":l,(0,C.jsxs)("div",{className:"input-wrapper",children:[(0,C.jsx)("input",{id:d,className:f,type:l,placeholder:a?"":u,"aria-label":"Enter your ".concat(u),name:d,value:r[d],onChange:s,onFocus:i,onBlur:o,"aria-required":"true","aria-invalid":!!t[d],required:!0,pattern:".*"}),(0,C.jsx)("label",{htmlFor:d,className:a?"":"hidden",children:u}),p&&(0,C.jsx)(j.l,{iconName:f,className:"".concat(f," ").concat("error"===f?"":"hide-icon")}),t[d]&&(0,C.jsx)("div",{className:"error-msg",role:"alert",children:t[d]}),("password"===l||h)&&(0,C.jsx)(j.l,{iconName:h?"eye-off":"eye",className:"toggle-eye ".concat(h?"hide-icon":""),onClick:function(){return c(d)}})]})}function S(e){return e.inputFields.map((function(n){return(0,C.jsx)(P,{inputField:n,credentials:e.credentials,errors:e.errors,isFloating:e.isFloating,handleChange:e.handleChange,handleFocus:e.handleFocus,handleBlur:e.handleBlur,togglePassVisibility:e.togglePassVisibility},n.name)}))}function E(e){return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(F.Z,{}),(0,C.jsxs)("label",{htmlFor:"float",children:["Toggle Float",(0,C.jsx)("input",{name:"float",id:"float",type:"checkbox",checked:e.isFloating,onChange:e.handleFloatToggle})]}),(0,C.jsxs)("form",{onSubmit:e.handleSignup,method:"POST",children:[(0,C.jsx)(S,(0,i.Z)({},e)),(0,C.jsx)("button",{type:"submit",disabled:e.areThereErrors||e.areSomeFieldsEmpty,className:"submit-btn ".concat(e.areThereErrors||e.areSomeFieldsEmpty?"disabled":""),children:"Sign up and start evolving"}),e.errors.general&&(0,C.jsx)("p",{className:"error-msg",children:e.errors.general})]})]})}function B(e){var n=e.setIsManualSignup,r=e.inputFields,t=e.credentials,a=e.errors,s=e.isFloating,i=e.handleChange,o=e.handleFocus,c=e.handleBlur,l=e.togglePassVisibility,u=e.handleFacebookSignup;return(0,C.jsxs)("section",{className:"social-signup",children:[(0,C.jsx)("h1",{children:"Create Your Account"}),(0,C.jsx)("p",{children:"Please note that phone verification is required for signup. Your number will be only used to verify your identity for security purposes"}),(0,C.jsx)(P,{inputField:r[0],credentials:t,errors:a,isFloating:s,handleChange:i,handleFocus:o,handleBlur:c,togglePassVisibility:l}),(0,C.jsx)("button",{onClick:function(){return n(!0)},className:"submit-btn",children:"Continue"}),(0,C.jsx)("p",{children:"OR"}),(0,C.jsx)("div",{id:"google-signIn-div"}),(0,C.jsxs)("button",{className:"facebook-btn img-btn",onClick:u,children:[(0,C.jsx)("img",{className:"facebook-img",src:"https://upload.wikimedia.org/wikipedia/commons/5/51/Facebook_f_logo_%282019%29.svg",alt:"facebook"}),"Continue with Facebook"]})]})}var V=r(456),T=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,O=/[a-z]/,q=/[A-Z]/,A=/[!@#$%^&*]/;function M(e){var n=(0,c.useState)(!1),r=(0,o.Z)(n,2),t=r[0],a=r[1];return t?(0,C.jsx)(E,(0,i.Z)({},e)):(0,C.jsx)(B,(0,i.Z)({setIsManualSignup:a},e))}function I(){var e=(0,x.s0)(),n=(0,l.I0)();(0,c.useEffect)((function(){document.title="Eramorph - Signup"}),[]);var r={firstName:"",lastName:"",emailAddress:"",password:"",confirmPassword:""},u=(0,c.useState)(!0),d=(0,o.Z)(u,2),p=d[0],h=d[1],f=function(e){var n=(0,c.useState)(e),r=(0,o.Z)(n,2),t=r[0],a=r[1],s=(0,c.useRef)([]),i=(0,c.useCallback)((function(e,n){n&&"function"===typeof n&&s.current.push(n),a(e)}),[]);return(0,c.useEffect)((function(){s.current.length>0&&(s.current.forEach((function(e){return e(t)})),s.current=[])}),[t]),[t,i]}(JSON.parse(JSON.stringify(r))),m=(0,o.Z)(f,2),g=m[0],v=m[1],b=(0,c.useState)(JSON.parse(JSON.stringify(r))),w=(0,o.Z)(b,2),Z=w[0],F=w[1],j=(0,c.useState)([{type:"text",placeholder:"First Name",name:"firstName",hasBeenChecked:!1},{type:"text",placeholder:"Last Name",name:"lastName",hasBeenChecked:!1},{type:"email",placeholder:"Email Address",name:"emailAddress",hasBeenChecked:!1},{type:"password",placeholder:"Password",name:"password",isVisible:!1,hasBeenChecked:!1},{type:"password",placeholder:"Confirm Password",name:"confirmPassword",isVisible:!1,hasBeenChecked:!1}]),P=(0,o.Z)(j,2),S=P[0],E=P[1],B=Object.values(g),I=B.some((function(e){return""===e})),J=Object.values(Z).some((function(e){return""!==e}));function _(e,n){var r=n.password.length<6||!O.test(n.password)||!q.test(n.password)||!A.test(n.password),t=n.password.length<6?"Password needs to be 6 letters or longer.":O.test(n.password)?q.test(n.password)?A.test(n.password)?"":"Password needs to contain at least one special character.":"Password needs to contain at least one uppercase letter.":"Password needs to contain at least one lowercase letter.",a={firstName:{qualifier:n.firstName.length<2,errorMsg:"First name must be at least 2 characters."},lastName:{qualifier:n.lastName.length<2,errorMsg:"Last name must be at least 2 characters."},emailAddress:{qualifier:!T.test(n.emailAddress),errorMsg:"Please enter a valid email address."},password:{qualifier:r,errorMsg:t},confirmPassword:{qualifier:r||n.password!==n.confirmPassword,errorMsg:t||"Passwords do not match."}};return E((function(n){return n.map((function(n){return n.name===e?(0,i.Z)((0,i.Z)({},n),{},{hasBeenChecked:!0}):n}))})),""===e?(F((function(n){return(0,i.Z)((0,i.Z)({},n),{},(0,s.Z)({},e,"Please fill out this fields."))})),!0):a[e].qualifier?(F((function(n){return(0,i.Z)((0,i.Z)({},n),{},(0,s.Z)({},e,a[e].errorMsg))})),!0):(F((function(n){return(0,i.Z)((0,i.Z)({},n),{},(0,s.Z)({},e,""))})),!1)}var z=(0,c.useCallback)(function(){var r=(0,a.Z)((0,t.Z)().mark((function r(a){return(0,t.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.prev=0,n(y(a)),F(""),e(k.MR),r.next=11;break;case 6:throw r.prev=6,r.t0=r.catch(0),console.log("Error in signup: ",r.t0),F("Error in signup request. Please try again."),r.t0;case 11:case"end":return r.stop()}}),r,null,[[0,6]])})));return function(e){return r.apply(this,arguments)}}(),[n,e]),G=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),F(JSON.parse(JSON.stringify(r))),I?(F((function(e){return(0,i.Z)((0,i.Z)({},e),{},{general:"Please fill out all fields."})})),0):!Object.keys(g).some((function(e){return _(e,g)}))&&(!B.find((function(e){return e.includes(" ")}))||(F((function(e){return(0,i.Z)((0,i.Z)({},e),{},{general:"Please remove spaces."})})),0))){e.next=3;break}return e.abrupt("return");case 3:z(g);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),L=(0,c.useCallback)((function(e){var n=(0,V.Z)(e.credential);z(n)}),[z]),R=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:alert("facebook");case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,c.useEffect)((function(){var e=document.createElement("script");return e.src="https://accounts.google.com/gsi/client",e.async=!0,e.onload=function(){var e=window.google;e.accounts.id.initialize({client_id:"871523970118-hi2gm3r18iflufpcgg72utl38f3l686s.apps.googleusercontent.com",callback:L}),e.accounts.id.renderButton(document.getElementById("google-signIn-div"),{theme:"outline",size:"large"})},document.body.appendChild(e),function(){document.body.removeChild(e)}}),[L]),(0,C.jsx)(N.Z,{children:(0,C.jsx)("div",{className:"signup",children:(0,C.jsx)(M,{credentials:g,errors:Z,inputFields:S,handleChange:function(e){var n=e.target,r=n.name,t=n.value;v((function(e){return(0,i.Z)((0,i.Z)({},e),{},(0,s.Z)({},r,t))}),(function(e){return _(r,e)}))},handleFocus:function(e){_(e.target.name,g)},handleBlur:function(e){_(e.target.name,g)},handleSignup:G,togglePassVisibility:function(e){E(S.map((function(n){return n.name===e?(0,i.Z)((0,i.Z)({},n),{},{isVisible:!n.isVisible}):n})))},isFloating:p,handleFloatToggle:function(e){h(!p)},areThereErrors:J,areSomeFieldsEmpty:I,handleFacebookSignup:R})})})}}}]);
//# sourceMappingURL=857.bd553d4b.chunk.js.map