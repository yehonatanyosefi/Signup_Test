"use strict";(self.webpackChunkeramorph=self.webpackChunkeramorph||[]).push([[939],{939:function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});var s=n(3433),r=n(9439),o=n(2791),a=n(9986),c=n(7721),i=n.n(c),u=n(184),l="/eramorph",d=[{pose:"Mountain",imgSrc:"".concat(l,"/imgs/mountain.svg")},{pose:"Tree",imgSrc:"".concat(l,"/imgs/tree.svg")},{pose:"Downward Dog",imgSrc:"".concat(l,"/imgs/dog.svg")},{pose:"Warrior I",imgSrc:"".concat(l,"/imgs/warrior1.svg")},{pose:"Warrior II",imgSrc:"".concat(l,"/imgs/warrior2.svg")},{pose:"Chair",imgSrc:"".concat(l,"/imgs/chair.svg")}],p=1e4,m=(Array(100).fill().map((function(){return"Mountain"})),function(){var e=(0,o.useState)(null),t=(0,r.Z)(e,2),n=t[0],c=t[1],m=(0,o.useState)(null),g=(0,r.Z)(m,2),h=g[0],f=g[1],v=(0,o.useState)(null),S=(0,r.Z)(v,2),x=S[0],j=S[1],k=(0,o.useState)([]),y=(0,r.Z)(k,2),N=y[0],Z=y[1],w=(0,o.useState)(p),b=(0,r.Z)(w,2),C=b[0],M=b[1],E=(0,o.useState)(""),I=(0,r.Z)(E,2),L=I[0],T=I[1],D=(0,o.useState)(!1),G=(0,r.Z)(D,2),R=G[0],W=G[1],Y=(0,o.useState)(!1),A=(0,r.Z)(Y,2),O=A[0],P=A[1],V=(0,o.useState)(""),_=(0,r.Z)(V,2),q=_[0],z=_[1],B=(0,o.useState)("loading"),F=(0,r.Z)(B,2),H=F[0],J=F[1],K=(0,o.useState)(null),Q=(0,r.Z)(K,2),U=Q[0],X=Q[1],$=(0,o.useRef)([]),ee=(0,o.useRef)(!1),te=(0,o.useRef)(null),ne=(0,o.useMemo)((function(){return!O||!R||"Ended"===H}),[O,R,H]),se=(0,o.useMemo)((function(){return O&&R?"teaching"===H?"Start Teaching":"Start Game":"Loading..."}),[O,R,N.length,H]);(0,o.useEffect)((function(){J("teaching")}),[]);var re=function(){W(!0)},oe=function(){P(!0)},ae=function(){if(n&&h.length){for(var e=[],t=0;t<n.keypoints.length;t++){var r=n.keypoints[t].position.x,o=n.keypoints[t].position.y;e.push(r),e.push(o)}te.current.classify(e,ue).catch((function(e){console.error("Classification error:",e)}))}else z("Not found"),$.current=[].concat((0,s.Z)($.current),[null]);ce()},ce=function(){M((function(e){var t=e-100;if(t<=0)return clearTimeout(U),ee.current?ie():(Z($.current),$.current=[],T("Let's start, you need to repeat the last video")),p;var n=setTimeout(ae,100);return X(n),t}))},ie=function(){var e=N.reduce((function(e,t,n){return t===$.current[n]?e+1:e}),0),t=Math.round(e/100*100);T("Game ended, your success rate is: ".concat(t,"%")),ee.current=!1,J("Ended")},ue=function(e,t){if(console.log("results:",t),!e&&t){var n=t[0].label;console.log("pose:",n),z(n),$.current=[].concat((0,s.Z)($.current),[n])}else $.current=[].concat((0,s.Z)($.current),[null])};return(0,u.jsxs)("div",{className:"pose-display",children:[(0,u.jsx)("div",{className:"pose-list",children:d.map((function(e){return(0,u.jsxs)("div",{className:"pose-item",children:[(0,u.jsx)("img",{src:e.imgSrc,className:"pose-img"}),(0,u.jsx)("div",{className:"pose-name",children:e.pose})]},e.pose)}))}),(0,u.jsx)(i(),{setup:function(e,t){e.createCanvas(640,480).parent(t);var n=e.createCapture(e.VIDEO);n.hide(),j(n),a.poseNet(n,oe).on("pose",(function(e){e.length>0&&(c(e[0].pose),f(e[0].skeleton))}));te.current=a.neuralNetwork({inputs:34,outputs:6,task:"classification",debug:!0});var s={model:"".concat(l,"/models/model2.json"),metadata:"".concat(l,"/models/model_meta2.json"),weights:"".concat(l,"/models/model.weights2.bin")};te.current.load(s,re)},draw:function(e){if(e.background(0),e.push(),e.translate(x.width,0),e.scale(-1,1),e.image(x,0,0,x.width,x.height),n)for(var t=0;t<h.length;t++){var s=h[t][0],r=h[t][1];e.strokeWeight(2),e.stroke(244,194,194),e.line(s.position.x,s.position.y,r.position.x,r.position.y)}e.pop()},className:"pose-canvas"}),(0,u.jsx)("p",{className:"message",children:L}),(ee.current||"testing"===H)&&(0,u.jsx)("p",{className:"time",children:C}),(ee.current||"testing"===H)&&(0,u.jsxs)("p",{className:"current-pose",children:["Pose: ",q]}),(0,u.jsx)("button",{onClick:function(){if(!O||!R)return T("Still Loading...");console.log(H),"teaching"===H?(T("Let's start, you have 10 seconds to do any pose you like"),J("testing"),ae()):"testing"===H&&(ee.current=!0,T("Game started! You have 10 seconds to repeat the poses"),J("Started"),ae())},disabled:ne,className:"start-button ".concat(ne?"disabled":""),children:se})]})});function g(){return(0,u.jsxs)("div",{className:"yoga-app",children:[(0,u.jsx)("header",{className:"header",children:(0,u.jsx)("h1",{children:"Yoga"})}),(0,u.jsx)(m,{})]})}}}]);
//# sourceMappingURL=939.0659baa8.chunk.js.map