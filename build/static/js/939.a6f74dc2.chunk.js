"use strict";(self.webpackChunkeramorph=self.webpackChunkeramorph||[]).push([[939],{939:function(e,t,s){s.r(t),s.d(t,{default:function(){return g}});var n=s(3433),r=s(9439),o=s(2791),a=s(9986),i=s(7721),c=s.n(i),u=s(184),l="/eramorph",d=[{pose:"Mountain",imgSrc:"".concat(l,"/imgs/mountain.svg")},{pose:"Tree",imgSrc:"".concat(l,"/imgs/tree.svg")},{pose:"Downward Dog",imgSrc:"".concat(l,"/imgs/dog.svg")},{pose:"Warrior I",imgSrc:"".concat(l,"/imgs/warrior1.svg")},{pose:"Warrior II",imgSrc:"".concat(l,"/imgs/warrior2.svg")},{pose:"Chair",imgSrc:"".concat(l,"/imgs/chair.svg")}],p=1e4,m=(Array(100).fill().map((function(){return"Mountain"})),function(){var e=(0,o.useState)(null),t=(0,r.Z)(e,2),s=t[0],i=t[1],l=(0,o.useState)(null),m=(0,r.Z)(l,2),g=m[0],h=m[1],f=(0,o.useState)(null),v=(0,r.Z)(f,2),S=v[0],x=v[1],j=(0,o.useState)([]),k=(0,r.Z)(j,2),y=k[0],N=k[1],Z=(0,o.useState)(p),w=(0,r.Z)(Z,2),b=w[0],C=w[1],M=(0,o.useState)(""),E=(0,r.Z)(M,2),I=E[0],L=E[1],T=(0,o.useState)(!1),D=(0,r.Z)(T,2),G=D[0],R=D[1],W=(0,o.useState)(!1),Y=(0,r.Z)(W,2),A=Y[0],O=Y[1],P=(0,o.useState)(""),V=(0,r.Z)(P,2),_=V[0],q=V[1],z=(0,o.useState)("loading"),B=(0,r.Z)(z,2),F=B[0],H=B[1],J=(0,o.useState)(null),K=(0,r.Z)(J,2),Q=K[0],U=K[1],X=(0,o.useRef)([]),$=(0,o.useRef)(!1),ee=(0,o.useRef)(null),te=(0,o.useMemo)((function(){return!A||!G||"Ended"===F}),[A,G,F]),se=(0,o.useMemo)((function(){return A&&G?"teaching"===F?"Start Teaching":"Start Game":"Loading..."}),[A,G,y.length,F]);(0,o.useEffect)((function(){H("teaching")}),[]);var ne=function(){R(!0)},re=function(){O(!0)},oe=function(){if(s&&g.length){for(var e=[],t=0;t<s.keypoints.length;t++){var r=s.keypoints[t].position.x,o=s.keypoints[t].position.y;e.push(r),e.push(o)}ee.current.classify(e,ce).catch((function(e){console.error("Classification error:",e)}))}else q("Not found"),X.current=[].concat((0,n.Z)(X.current),[null]);ae()},ae=function(){C((function(e){var t=e-100;if(t<=0)return clearTimeout(Q),$.current?ie():(N(X.current),X.current=[],L("Let's start, you need to repeat the last video")),p;var s=setTimeout(oe,100);return U(s),t}))},ie=function(){var e=y.reduce((function(e,t,s){return t===X.current[s]?e+1:e}),0),t=Math.round(e/100*100);L("Game ended, your success rate is: ".concat(t,"%")),$.current=!1,H("Ended")},ce=function(e,t){if(console.log("results:",t),!e&&t){var s=t[0].label;console.log("pose:",s),q(s),X.current=[].concat((0,n.Z)(X.current),[s])}else X.current=[].concat((0,n.Z)(X.current),[null])};return(0,u.jsxs)("div",{className:"pose-display",children:[(0,u.jsx)("div",{className:"pose-list",children:d.map((function(e){return(0,u.jsxs)("div",{className:"pose-item",children:[(0,u.jsx)("img",{src:e.imgSrc,className:"pose-img"}),(0,u.jsx)("div",{className:"pose-name",children:e.pose})]},e.pose)}))}),(0,u.jsx)(c(),{setup:function(e,t){e.createCanvas(640,480).parent(t);var s=e.createCapture(e.VIDEO);s.hide(),x(s),a.poseNet(s,re).on("pose",(function(e){e.length>0&&(i(e[0].pose),h(e[0].skeleton))}));ee.current=a.neuralNetwork({inputs:34,outputs:6,task:"classification",debug:!0});ee.current.load({model:"/models/model2.json",metadata:"/models/model_meta2.json",weights:"/models/model.weights2.bin"},ne)},draw:function(e){if(e.background(0),e.push(),e.translate(S.width,0),e.scale(-1,1),e.image(S,0,0,S.width,S.height),s)for(var t=0;t<g.length;t++){var n=g[t][0],r=g[t][1];e.strokeWeight(2),e.stroke(244,194,194),e.line(n.position.x,n.position.y,r.position.x,r.position.y)}e.pop()},className:"pose-canvas"}),(0,u.jsx)("p",{className:"message",children:I}),($.current||"testing"===F)&&(0,u.jsx)("p",{className:"time",children:b}),($.current||"testing"===F)&&(0,u.jsxs)("p",{className:"current-pose",children:["Pose: ",_]}),(0,u.jsx)("button",{onClick:function(){if(!A||!G)return L("Still Loading...");console.log(F),"teaching"===F?(L("Let's start, you have 10 seconds to do any pose you like"),H("testing"),oe()):"testing"===F&&($.current=!0,L("Game started! You have 10 seconds to repeat the poses"),H("Started"),oe())},disabled:te,className:"start-button ".concat(te?"disabled":""),children:se})]})});function g(){return(0,u.jsxs)("div",{className:"yoga-app",children:[(0,u.jsx)("header",{className:"header",children:(0,u.jsx)("h1",{children:"Yoga"})}),(0,u.jsx)(m,{})]})}}}]);
//# sourceMappingURL=939.a6f74dc2.chunk.js.map